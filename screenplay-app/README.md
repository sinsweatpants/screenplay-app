# تطبيق كتابة السيناريو الاحترافي

## 📝 نظرة عامة

هذا هو تطبيق ويب متكامل ومتقدم لكتابة السيناريوهات السينمائية والدرامية. تم تصميمه ليكون أداة إنتاجية كاملة للكتّاب، حيث يجمع بين محرر نصوص قوي، وأدوات تحليلية ذكية، ومساعد كتابة يعمل بالذكاء الاصطناعي، وميزات تعاونية. التطبيق مبني بالكامل باستخدام HTML, CSS, و JavaScript الحديث (ES6+).

---

## ✨ الميزات الرئيسية

### 1. المحرر الأساسي (Core Editor)
- **محرر WYSIWYG:** محرر "ما تراه هو ما تحصل عليه" يدعم التنسيق المباشر.
- **9 تنسيقات سيناريو:** (بسملة، 3 مستويات عناوين، شخصية، حوار، بين قوسين، فعل، انتقال).
- **اختصارات لوحة المفاتيح:** اختصارات مخصصة لجميع التنسيقات والإجراءات الأساسية (مثل `Ctrl+S`, `Ctrl+1-8`).
- **التراجع والإعادة:** مكدس تراجع/إعادة يصل إلى 50 مستوى.
- **حفظ تلقائي:** يتم حفظ العمل تلقائيًا كل 30 ثانية في `IndexedDB`.
- **الوضع المظلم/الفاتح:** تصميم يدعم التبديل السلس بين الوضعين.
- **شريط الحالة:** تحديثات حية لعدد الكلمات، الأحرف، والصفحات.

### 2. إدارة الملفات والمشاريع
- **استيراد الملفات:** دعم استيراد ملفات `.txt` و `.docx` (يتطلب مكتبة `mammoth.js`).
- **تصدير احترافي:** تصدير السيناريو إلى صيغ `TXT`, `HTML`, `DOCX`. (تصدير `PDF` و `RTF` يتطلب مكتبات إضافية).
- **إدارة المشاريع:** دعم العمل على مشاريع متعددة، مع حفظ كل مشروع بشكل منفصل.
- **قوالب جاهزة:** البدء من قوالب جاهزة لأنواع مختلفة (أكشن، دراما، كوميدي، رومانسي).

### 3. التحليل والرؤى
- **محرك تحليلات:** تحليل حي للنص لحساب عدد المشاهد، الشخصيات، وتوزيع المشاهد (نهار/ليل).
- **إحصائيات الشخصيات:** تتبع عدد مرات ظهور كل شخصية وعدد أسطر حوارها.
- **تخطيط بصري:** تحويل البيانات إلى رسوم بيانية (يتطلب مكتبة `Chart.js`).

### 4. مساعد الذكاء الاصطناعي (Claude API)
- **توليد المحتوى:** إنشاء حوار، مشاهد، أو أوصاف شخصيات.
- **تحسين النصوص:** تحسين النصوص من ناحية الوضوح، الأسلوب، والعاطفة.
- **تكامل آمن:** استخدام مفتاح API الخاص بالمستخدم مع طلبات مؤجلة (debounced) للأداء.

### 5. البحث والتحقق
- **بحث متقدم:** البحث عن نص داخل السيناريو مع إمكانية التصفية حسب نوع التنسيق.
- **مدقق الأخطاء:** فحص النص بحثًا عن أخطاء التنسيق الشائعة (مثل حوار بدون شخصية) وتقديم اقتراحات.

### 6. التعاون (محاكاة)
- **نظام التعليقات:** إضافة، حل، وحذف التعليقات المرتبطة بالنص.
- **إدارة المستخدمين:** نظام صلاحيات مبسط (مالك، محرر، معلق).
- **الإشارة للمستخدمين:** محاكاة للإشارة إلى المستخدمين الآخرين (`@mentions`).

---

## 🚀 التشغيل والاستخدام

### المتطلبات
- متصفح ويب حديث (Chrome 90+, Firefox 88+, Safari 14+).
- **(اختياري) مكتبات خارجية:** لعمل جميع الميزات، قد تحتاج إلى إضافة المكتبات التالية إلى `index.html`:
  - `mammoth.js` (لقراءة ملفات .docx)
  - `Chart.js` (لعرض الرسوم البيانية)
  - `html2pdf.js` (لتصدير ملفات PDF)

### خطوات التشغيل
1.  قم باستنساخ أو تحميل هذا المستودع.
2.  **لأفضل أداء:** قم بتشغيل خادم ويب محلي في مجلد `screenplay-app`. يمكنك استخدام إضافة مثل "Live Server" في Visual Studio Code. هذا ضروري لبعض الميزات مثل تحميل ملفات `JSON`.
3.  **كحل بديل:** يمكنك فتح ملف `index.html` مباشرة في متصفحك.

### إعداد مساعد الذكاء الاصطناعي
لتفعيل ميزات الذكاء الاصطناعي، يجب عليك إضافة مفتاح Claude API الخاص بك:
1.  افتح الملف: `js/core/config.js`.
2.  ابحث عن السطر: `claudeApiKey: '',`.
3.  أدخل مفتاح API الخاص بك بين علامتي الاقتباس.
    ```javascript
    api: {
        claudeApiKey: 'sk-ant-xxxxxxxxxxxxxxxxxxxxxxxxxx', // <-- أدخل مفتاحك هنا
        // ...
    },
    ```
4.  احفظ الملف وأعد تحميل التطبيق.

---

## 🛠️ البنية التقنية

- **Frontend:** HTML5, CSS3, JavaScript (ES6+).
- **No Frameworks:** تم بناء التطبيق باستخدام "Vanilla JavaScript" لتوفير أقصى قدر من الأداء والتحكم.
- **CSS Architecture:** استخدام متغيرات CSS، بنية BEM-like، وتصميم Mobile-first.
- **JavaScript Architecture:**
  - **Modular:** تم تقسيم الكود إلى وحدات مستقلة (Modules) لكل نظام فرعي.
  - **Event-Driven:** استخدام "ناقل أحداث" (Event Bus) مركزي لفصل الوحدات عن بعضها.
  - **Single Responsibility:** كل كلاس أو وحدة لها مسؤولية واضحة ومحددة.
- **التخزين:**
  - `localStorage`: لتخزين الإعدادات البسيطة والمؤقتة.
  - `IndexedDB`: لتخزين البيانات المعقدة مثل المشاريع الكاملة ومحتوياتها.

### هيكل الملفات
```
screenplay-app/
├── css/         (ملفات التنسيق)
├── data/        (ملفات البيانات مثل القوالب)
├── js/
│   ├── core/    (الملفات الأساسية: main, config, integrated-system)
│   ├── libraries/ (مكتبات أساسية: event-bus, storage, etc.)
│   └── modules/ (جميع الوحدات الوظيفية: export, analytics, etc.)
├── assets/      (الأيقونات، الخطوط، الصور)
└── index.html   (الملف الرئيسي للتطبيق)
```

---
## 🤝 المساهمة
هذا المشروع هو مثال على تطبيق ويب متكامل. يمكن للمطورين استخدامه كنقطة انطلاق أو استلهام أفكار منه. إذا كنت ترغب في المساهمة، يمكنك البدء بتنفيذ الميزات المتقدمة المشار إليها في الكود (مثل التكامل الفعلي مع `Chart.js` أو إضافة دعم `PDF`).