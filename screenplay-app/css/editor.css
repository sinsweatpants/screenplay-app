/* ==========================================================================
   Editor CSS File: Editor Area, Rulers, and Formatting Styles
   ========================================================================== */

/* -------------------------------------------------------------------------- */
/*                              Editor Container                              */
/* -------------------------------------------------------------------------- */

.editor-container {
    display: flex;
    justify-content: center;
    padding: var(--space-8);
    background-color: var(--bg-tertiary);
    overflow: auto;
    position: relative;
}

.editor {
    width: 21cm; /* A4 width */
    min-height: 29.7cm; /* A4 height */
    padding: 2.54cm; /* 1-inch margins */
    background-color: var(--bg-primary);
    box-shadow: var(--shadow-lg);
    font-family: var(--font-editor);
    font-size: var(--font-size-editor);
    line-height: var(--line-height-editor);
    color: var(--text-primary);
    outline: none;
    white-space: pre-wrap; /* Preserve whitespace and wrap lines */
    word-wrap: break-word;
}

.dark-mode .editor {
    border: 1px solid var(--border);
}

/* -------------------------------------------------------------------------- */
/*                                   Rulers                                   */
/* -------------------------------------------------------------------------- */

.ruler {
    position: absolute;
    background-color: var(--bg-secondary);
    background-image: linear-gradient(90deg, var(--border) 1px, transparent 1px),
                      linear-gradient(90deg, var(--border) 1px, transparent 1px);
    background-size: 1cm 1cm, 0.5cm 0.5cm;
    background-repeat: repeat-x;
    opacity: 0.7;
    z-index: 1;
    pointer-events: none;
}

.ruler.horizontal {
    top: 0;
    left: 0;
    right: 0;
    height: var(--space-6);
}

.ruler.vertical {
    top: 0;
    left: 0;
    bottom: 0;
    width: var(--space-6);
    background-size: 1cm 1cm, 0.5cm 0.5cm;
    background-repeat: repeat-y;
    background-image: linear-gradient(0deg, var(--border) 1px, transparent 1px),
                      linear-gradient(0deg, var(--border) 1px, transparent 1px);
}

/* Hide rulers by default, can be toggled by a class on a parent element */
.rulers-hidden .ruler {
    display: none;
}

/* -------------------------------------------------------------------------- */
/*                             Formatting Styles                              */
/* -------------------------------------------------------------------------- */
/* These styles will be applied to divs or paragraphs inside the editor */

/* Default paragraph style (Action) */
.editor p, .editor div {
    margin: 0 0 var(--line-height-editor) 0;
    padding: 0;
}

/* 1. Basmala */
.format-basmala {
    text-align: center;
    font-weight: bold;
    margin-top: 2cm;
    margin-bottom: 2cm;
}

/* 2. Heading 1 (Scene Heading) */
.format-heading1 {
    font-weight: bold;
    text-transform: uppercase;
    margin-top: calc(var(--line-height-editor) * 1em);
}

/* 3. Heading 2 */
.format-heading2 {
    font-weight: bold;
    margin-top: calc(var(--line-height-editor) * 0.8em);
}

/* 4. Heading 3 */
.format-heading3 {
    font-style: italic;
    margin-top: calc(var(--line-height-editor) * 0.5em);
}

/* 5. Character */
.format-character {
    text-align: center;
    margin-left: 5cm;
    margin-right: 5cm;
    margin-top: calc(var(--line-height-editor) * 1em);
    text-transform: uppercase;
}

/* 6. Dialogue */
.format-dialogue {
    margin-left: 2.5cm;
    margin-right: 2.5cm;
}

/* 7. Parenthetical */
.format-parenthetical {
    text-align: center;
    margin-left: 4cm;
    margin-right: 4cm;
}

/* 8. Action (This is the default style) */
.format-action {
    /* No special styles needed, inherits default */
}

/* 9. Transition */
.format-transition {
    text-align: right;
    font-weight: bold;
    text-transform: uppercase;
    margin-top: calc(var(--line-height-editor) * 1em);
}


/* -------------------------------------------------------------------------- */
/*                          Optional Editor Features                          */
/* -------------------------------------------------------------------------- */

/* Line Numbers */
.line-numbers-active .editor {
    padding-left: calc(2.54cm + 40px); /* Adjust padding for line numbers */
}

.line-numbers {
    position: absolute;
    left: 2.54cm;
    top: 2.54cm;
    width: 35px;
    padding-top: 2px; /* Align with first line */
    font-family: var(--font-ui);
    font-size: var(--text-xs);
    color: var(--text-secondary);
    text-align: right;
    user-select: none;
    pointer-events: none;
}

/* Current Line Highlight */
.current-line {
    background-color: rgba(var(--primary), 0.1);
}
.dark-mode .current-line {
    background-color: rgba(var(--primary), 0.2);
}