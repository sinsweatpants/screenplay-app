<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تطبيق كتابة السيناريو | محرر احترافي</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="تطبيق ويب متكامل واحترافي لكتابة السيناريوهات السينمائية والدرامية مع أدوات تحليلية ومساعد ذكاء اصطناعي.">
    <meta name="keywords" content="كتابة سيناريو, محرر نصوص, سيناريو, أفلام, مسلسلات, إبداع, كتابة إبداعية, ذكاء اصطناعي">
    <meta name="author" content="Jules - AI Software Engineer">

    <!-- Open Graph Meta Tags (for social sharing) -->
    <meta property="og:title" content="تطبيق كتابة السيناريو الاحترافي">
    <meta property="og:description" content="حوّل أفكارك إلى سيناريوهات جاهزة للإنتاج مع محررنا الذكي والمتكامل.">
    <meta property="og:image" content="assets/images/og-image.png">
    <meta property="og:url" content="https://your-app-url.com">
    <meta property="og:type" content="website">

    <!-- PWA (Progressive Web App) Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#111827">

    <!-- Favicon and App Icons -->
    <link rel="icon" href="assets/icons/favicon.ico" sizes="any">
    <link rel="icon" href="assets/icons/favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="assets/icons/apple-touch-icon.png">

    <!-- CSS Stylesheets -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/editor.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/modals.css">
    <link rel="stylesheet" href="css/responsive.css">

    <!-- Defer JS loading -->
    <script src="js/libraries/event-bus.js" defer></script>
    <script src="js/libraries/storage-manager.js" defer></script>
    <script src="js/libraries/keyboard-manager.js" defer></script>
    <script src="js/libraries/notification-manager.js" defer></script>
    <script src="js/core/config.js" defer></script>
    <script src="js/modules/utilities.js" defer></script>
    <script src="js/modules/export.js" defer></script>
    <script src="js/modules/functions.js" defer></script>
    <script src="js/modules/analytics.js" defer></script>
    <script src="js/modules/planning.js" defer></script>
    <script src="js/modules/character-manager.js" defer></script>
    <script src="js/modules/project-manager.js" defer></script>
    <script src="js/modules/ai-assistant.js" defer></script>
    <script src="js/modules/search-validator.js" defer></script>
    <script src="js/modules/collaboration.js" defer></script>
    <script src="js/core/integrated-system.js" defer></script>
    <script type="module" src="js/core/main.js" defer></script>

</head>
<body class="light-mode">
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="spinner"></div>
        <p>جاري تحميل التطبيق...</p>
    </div>

    <!-- Main Application Wrapper -->
    <div id="app-wrapper" class="app-wrapper" style="display: none;">

        <!-- Top Bar -->
        <header id="top-bar" class="top-bar">
            <div class="top-bar-left">
                <img src="assets/images/logo.svg" alt="Logo" class="logo">
                <h1 id="document-title" class="document-title" contenteditable="true">سيناريو بدون عنوان</h1>
            </div>
            <div class="top-bar-center">
                <span id="save-status" class="save-status" aria-live="polite">تم حفظ جميع التغييرات</span>
            </div>
            <div class="top-bar-right">
                <button id="btn-export" class="btn btn-icon" aria-label="تصدير"><img src="assets/icons/export.svg" alt=""></button>
                <button id="btn-collaboration" class="btn btn-icon" aria-label="تعاون"><img src="assets/icons/users.svg" alt=""></button>
                <button id="btn-settings" class="btn btn-icon" aria-label="إعدادات"><img src="assets/icons/settings.svg" alt=""></button>
                <button id="theme-toggle" class="btn btn-icon" aria-label="تبديل الوضع"><img src="assets/icons/moon.svg" alt=""></button>
            </div>
        </header>

        <!-- Main Content Area -->
        <main id="main-content" class="main-content">

            <!-- Left Sidebar -->
            <aside id="left-sidebar" class="left-sidebar">
                <div class="toolbar-section">
                    <h2 class="sidebar-title">أدوات</h2>
                    <div class="tools-grid">
                        <button class="tool-btn" data-tool="new" aria-label="جديد"><img src="assets/icons/file-plus.svg" alt=""></button>
                        <button class="tool-btn" data-tool="open" aria-label="فتح"><img src="assets/icons/folder.svg" alt=""></button>
                        <button class="tool-btn" data-tool="save" aria-label="حفظ"><img src="assets/icons/save.svg" alt=""></button>
                        <button class="tool-btn" data-tool="undo" aria-label="تراجع"><img src="assets/icons/undo.svg" alt=""></button>
                        <button class="tool-btn" data-tool="redo" aria-label="إعادة"><img src="assets/icons/redo.svg" alt=""></button>
                        <button class="tool-btn" data-tool="print" aria-label="طباعة"><img src="assets/icons/printer.svg" alt=""></button>
                    </div>
                </div>
                <div class="toolbar-section">
                    <h2 class="sidebar-title">تنسيق</h2>
                    <div class="formats-list">
                        <button class="format-btn" data-format="basmala">بسملة (Ctrl+0)</button>
                        <button class="format-btn" data-format="heading1">عنوان 1 (Ctrl+1)</button>
                        <button class="format-btn" data-format="heading2">عنوان 2 (Ctrl+2)</button>
                        <button class="format-btn" data-format="heading3">عنوان 3 (Ctrl+3)</button>
                        <button class="format-btn" data-format="character">شخصية (Ctrl+4)</button>
                        <button class="format-btn" data-format="dialogue">حوار (Ctrl+5)</button>
                        <button class="format-btn" data-format="parenthetical">بين قوسين (Ctrl+6)</button>
                        <button class="format-btn" data-format="action">فعل (Ctrl+7)</button>
                        <button class="format-btn" data-format="transition">انتقال (Ctrl+8)</button>
                    </div>
                </div>
            </aside>

            <!-- Editor Area -->
            <div id="editor-container" class="editor-container">
                <div id="horizontal-ruler" class="ruler horizontal"></div>
                <div id="vertical-ruler" class="ruler vertical"></div>
                <div id="editor" class="editor" contenteditable="true" spellcheck="false" aria-label="محرر السيناريو"></div>
            </div>

            <!-- Right Sidebar -->
            <aside id="right-sidebar" class="right-sidebar">
                <div class="tab-buttons">
                    <button class="tab-btn active" data-tab="stats-tab" aria-label="إحصائيات"><img src="assets/icons/chart.svg" alt=""></button>
                    <button class="tab-btn" data-tab="chars-tab" aria-label="شخصيات"><img src="assets/icons/user-circle.svg" alt=""></button>
                    <button class="tab-btn" data-tab="ai-tab" aria-label="مساعد ذكي"><img src="assets/icons/sparkles.svg" alt=""></button>
                    <button class="tab-btn" data-tab="search-tab" aria-label="بحث"><img src="assets/icons/search.svg" alt=""></button>
                    <button class="tab-btn" data-tab="outline-tab" aria-label="مخطط"><img src="assets/icons/list.svg" alt=""></button>
                </div>
                <div class="tab-content">
                    <div id="stats-tab" class="tab-pane active"></div>
                    <div id="chars-tab" class="tab-pane"></div>
                    <div id="ai-tab" class="tab-pane"></div>
                    <div id="search-tab" class="tab-pane"></div>
                    <div id="outline-tab" class="tab-pane"></div>
                </div>
            </aside>
        </main>

        <!-- Bottom Status Bar -->
        <footer id="status-bar" class="status-bar">
            <div class="status-left">
                <span id="word-count">كلمات: 0</span> |
                <span id="page-count">صفحات: 0</span> |
                <span id="char-count">حروف: 0</span>
            </div>
            <div class="status-right">
                <span id="current-format">التنسيق الحالي: فعل</span>
            </div>
        </footer>

    </div>

    <!-- Modals Container -->
    <div id="modals-container">
        <!-- Modals will be dynamically injected here -->
    </div>

    <!-- Error Boundary -->
    <div id="error-boundary" class="error-boundary" style="display: none;">
        <h2>عفوًا، حدث خطأ ما.</h2>
        <p>يرجى إعادة تحميل الصفحة والمحاولة مرة أخرى.</p>
        <button onclick="window.location.reload()">إعادة تحميل</button>
    </div>
</body>
</html>